(()=>{var e={};e.id=859,e.ids=[859],e.modules={3175:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var r=s(70260),a=s(28203),o=s(25155),i=s.n(o),n=s(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let l={children:["",{children:["auth",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,14427)),"D:\\Projects\\Important\\Shop - Copy\\ui\\app\\auth\\login\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"D:\\Projects\\Important\\Shop - Copy\\ui\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["D:\\Projects\\Important\\Shop - Copy\\ui\\app\\auth\\login\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/auth/login/page",pathname:"/auth/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6350:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"008b0ee705046773f459a88572ff2944041ee4eda2":()=>a.bW,"40c70ec598ee2f92e08f96f758bcbb7ee9a7225525":()=>a.T,"60216be9ca5ea01d5fad7ae985654ffaeed9510463":()=>a.Ay,"7f8fe70644aa9bb0033cb4df6dc1b76f73ce616f67":()=>r.W});var r=s(97269),a=s(2423)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14427:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\Important\\\\Shop - Copy\\\\ui\\\\app\\\\auth\\\\login\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\Important\\Shop - Copy\\ui\\app\\auth\\login\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},25153:(e,t,s)=>{"use strict";s.d(t,{Lx:()=>i,T5:()=>n});var r=s(85668),a=s(25998);let o="http://localhost:3001",i=async e=>{try{let t={email:e.email.toLowerCase(),password:e.password},s=await r.A.post(`${o}/auth/login`,t);if(console.log("Server response:",s.data),s.data.access_token&&(localStorage.setItem("access_token",s.data.access_token),a.A.set("access_token",s.data.access_token,{expires:1,secure:!0,sameSite:"lax"}),r.A.defaults.headers.common.Authorization=`Bearer ${s.data.access_token}`),s.data.user&&s.data.access_token)return{success:!0,user:s.data.user,access_token:s.data.access_token};return{success:!1,message:s.data.message||"Login failed"}}catch(e){return console.error("Login error:",e.response?.data),{success:!1,message:e.response?.data?.message||"Login failed"}}},n=async()=>{try{let e=localStorage.getItem("access_token")||a.A.get("access_token");if(!e)return null;return(await r.A.get(`${o}/auth/me`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){return null}}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(88077);let a=async e=>[{type:"image/x-icon",sizes:"100x100",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},54335:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(45512),a=s(6868),o=s(81914),i=s(16131),n=s(79334),c=s(87021),l=s(97643),d=s(25409),u=s(47699),p=s(25153),m=s(58009),x=s(91542);let h=i.z.object({email:i.z.string().email("Please enter a valid email address"),password:i.z.string().min(6,"Password must be at least 6 characters long")});function g(){let e=(0,n.useRouter)(),[t,s]=(0,m.useState)(null),{register:i,handleSubmit:g,formState:{errors:f,isSubmitting:v},setError:b}=(0,a.mN)({resolver:(0,o.u)(h)}),y=async e=>{s(null),console.log("Form submitted with data:",e);try{let t=await (0,p.Lx)(e);console.log("Login result:",t),t.success&&t.access_token?(x.o.success("Login successful!",{description:"Welcome back! Redirecting to home...",duration:2e3}),setTimeout(()=>{window.location.href="/"},1e3)):b("root",{type:"manual",message:t.message||"Invalid credentials"})}catch(e){console.error("Submission error:",e),b("root",{type:"manual",message:e.response?.data?.message||"Failed to connect to server"})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Zp,{className:"w-[350px] mx-auto mt-20",children:[(0,r.jsx)(l.aR,{className:"text-center",children:(0,r.jsx)(l.ZB,{className:"text-2xl font-bold text-foreground",children:"Login"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("form",{onSubmit:g(y),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(d.p,{id:"email",type:"email",placeholder:"Enter your email",...i("email"),disabled:v}),f.email&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:f.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"password",children:"Password"}),(0,r.jsx)(d.p,{id:"password",type:"password",placeholder:"Enter your password",...i("password"),disabled:v}),f.password&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:f.password.message})]}),f.root&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:f.root.message}),t&&(0,r.jsx)("p",{className:"text-destructive text-sm",children:t}),(0,r.jsx)(c.$,{type:"submit",className:"w-full",disabled:v,children:v?"Logging in...":"Login"}),(0,r.jsxs)("div",{className:"text-center mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Don't have an account?"}),(0,r.jsx)(c.$,{type:"button",variant:"link",className:"text-primary hover:text-primary/80",onClick:()=>e.push("/auth/signup"),children:"Sign up here"})]})]})})]}),(0,r.jsx)(x.Toaster,{richColors:!0,position:"top-center"})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73949:(e,t,s)=>{Promise.resolve().then(s.bind(s,14427))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},92509:(e,t,s)=>{Promise.resolve().then(s.bind(s,54335))},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,561,77,277],()=>s(3175));module.exports=r})();