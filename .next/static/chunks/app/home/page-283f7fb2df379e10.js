(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{5047:(e,a,s)=>{Promise.resolve().then(s.bind(s,9670))},6046:(e,a,s)=>{"use strict";var t=s(6658);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},9615:(e,a,s)=>{"use strict";s.d(a,{Lx:()=>n,T5:()=>o});var t=s(2651),c=s(9208);let r="http://localhost:3001",n=async e=>{try{let a={email:e.email.toLowerCase(),password:e.password},s=await t.A.post("".concat(r,"/auth/login"),a);if(console.log("Server response:",s.data),s.data.access_token&&(localStorage.setItem("access_token",s.data.access_token),c.A.set("access_token",s.data.access_token,{expires:1,secure:!0,sameSite:"lax"}),t.A.defaults.headers.common.Authorization="Bearer ".concat(s.data.access_token)),s.data.user&&s.data.access_token)return{success:!0,user:s.data.user,access_token:s.data.access_token};return{success:!1,message:s.data.message||"Login failed"}}catch(e){var a,s,n;return console.error("Login error:",null===(a=e.response)||void 0===a?void 0:a.data),{success:!1,message:(null===(n=e.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.message)||"Login failed"}}},o=async()=>{try{let e=localStorage.getItem("access_token")||c.A.get("access_token");if(!e)return null;return(await t.A.get("".concat(r,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return null}}},9670:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var t=s(5155),c=s(2115),r=s(6046),n=s(9615);function o(){let e=(0,r.useRouter)(),[a,s]=(0,c.useState)(null),[o,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let a=await (0,n.T5)();a?s(a):e.replace("/auth/login")}catch(a){console.error("Auth check failed:",a),e.replace("/auth/login")}finally{l(!1)}})()},[e]),o)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-xl",children:"Loading..."})}):a?(0,t.jsxs)("div",{className:"container mx-auto p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Welcome to the Home Page"}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"User Information"}),(0,t.jsxs)("p",{children:["Email: ",a.email]}),(0,t.jsxs)("p",{children:["ID: ",a.id]})]})]}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[794,441,587,358],()=>a(5047)),_N_E=e.O()}]);