(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{155:(e,t,s)=>{Promise.resolve().then(s.bind(s,7054)),Promise.resolve().then(s.bind(s,4049)),Promise.resolve().then(s.bind(s,1078)),Promise.resolve().then(s.bind(s,7126)),Promise.resolve().then(s.bind(s,6171)),Promise.resolve().then(s.t.bind(s,9840,23)),Promise.resolve().then(s.t.bind(s,9324,23)),Promise.resolve().then(s.bind(s,814))},745:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>c,yv:()=>d});var a=s(5155);s(2115);var r=s(4212),n=s(1719),l=s(8867),o=s(1902),i=s(9602);function c(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:l,...o}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":s,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:n="popper",...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(f,{})]})})}function x(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:s})]})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(o.A,{className:"size-4"})})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"size-4"})})}},1078:(e,t,s)=>{"use strict";s.d(t,{default:()=>ea});var a=s(5155),r=s(2115),n=s(6046),l=s(8173),o=s.n(l),i=s(4482),c=s(6710),d=s(6507),u=s(2060),m=s(2823),x=s(1466),h=s(5236),f=s(4085),p=s(2149),g=s(9602);function v(e){let{...t}=e;return(0,a.jsx)(p.bL,{"data-slot":"dropdown-menu",...t})}function j(e){let{...t}=e;return(0,a.jsx)(p.l9,{"data-slot":"dropdown-menu-trigger",...t})}function b(e){let{className:t,sideOffset:s=4,...r}=e;return(0,a.jsx)(p.ZL,{children:(0,a.jsx)(p.UC,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,g.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function N(e){let{className:t,inset:s,variant:r="default",...n}=e;return(0,a.jsx)(p.q7,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:(0,g.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}var y=s(42),w=s(767);function k(e){let{...t}=e;return(0,a.jsx)(y.bL,{"data-slot":"sheet",...t})}function A(e){let{...t}=e;return(0,a.jsx)(y.l9,{"data-slot":"sheet-trigger",...t})}function C(e){let{...t}=e;return(0,a.jsx)(y.ZL,{"data-slot":"sheet-portal",...t})}function z(e){let{className:t,...s}=e;return(0,a.jsx)(y.hJ,{"data-slot":"sheet-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function P(e){let{className:t,children:s,side:r="right",...n}=e;return(0,a.jsxs)(C,{children:[(0,a.jsx)(z,{}),(0,a.jsxs)(y.UC,{"data-slot":"sheet-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[s,(0,a.jsxs)(y.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(w.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function S(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,g.cn)("flex flex-col gap-1.5 p-4",t),...s})}function I(e){let{className:t,...s}=e;return(0,a.jsx)(y.hE,{"data-slot":"sheet-title",className:(0,g.cn)("text-foreground font-semibold",t),...s})}var _=s(4920);function L(e){let{className:t,...s}=e;return(0,a.jsx)(_.bL,{"data-slot":"avatar",className:(0,g.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...s})}function E(e){let{className:t,...s}=e;return(0,a.jsx)(_._V,{"data-slot":"avatar-image",className:(0,g.cn)("aspect-square size-full",t),...s})}function F(e){let{className:t,...s}=e;return(0,a.jsx)(_.H4,{"data-slot":"avatar-fallback",className:(0,g.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}var U=s(7054);let D=[{title:"Login",path:"/auth/login"},{title:"Signup",path:"/auth/signup"}];var R=s(9208),$=s(2651),q=s(7837),J=s(5007),O=s(5785),Z=s(1190),T=s(6462),W=s(2423),G=s(9282);let M="http://localhost:3001";function V(e){return e?e.startsWith("http")?e:e.startsWith("/uploads")?"".concat(M).concat(e):"".concat(M,"/uploads/profiles/").concat(e):"/avatars/01.png"}async function B(){try{let e=localStorage.getItem("access_token");if(!e)throw Error("No authentication token found");console.log("=== Profile Service Debug ==="),console.log("API URL:","".concat(M,"/users/profile")),console.log("Token (first 10 chars):",e.substring(0,10)+"...");let t=await $.A.get("".concat(M,"/users/profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},withCredentials:!0});if(console.log("=== User Profile Data ==="),console.log("Full Response:",t.data),console.log("User ID:",t.data.id),console.log("Username:",t.data.username),console.log("Email:",t.data.email),console.log("Name:",t.data.name),console.log("Profile Image Path:",t.data.profileImage),console.log("Full Image URL:",V(t.data.profileImage)),console.log("Created At:",t.data.createdAt),console.log("Updated At:",t.data.updatedAt),console.log("========================"),!t.data)throw Error("No data received from server");return t.data}catch(l){var e,t,s,a,r,n;if(console.error("=== Profile Service Error ==="),console.error("Error Details:",l),console.error("Response Status:",null===(e=l.response)||void 0===e?void 0:e.status),console.error("Response Data:",null===(t=l.response)||void 0===t?void 0:t.data),console.error("========================"),(null===(s=l.response)||void 0===s?void 0:s.status)===401)throw Error("Authentication failed. Please login again.");if((null===(a=l.response)||void 0===a?void 0:a.status)===404)throw Error("User profile not found");throw Error((null===(n=l.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to fetch user profile")}}var H=s(814),Q=s(4505);function X(e){let{open:t,onOpenChange:s}=e,[n,l]=(0,r.useState)(null),[o,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(console.log("Profile dialog opened, loading profile..."),u())},[t]);let u=async()=>{try{i(!0),console.log("=== Profile Component Debug ==="),console.log("Loading profile...");let e=await B();console.log("Profile loaded successfully"),console.log("Profile Image URL:",e.profileImage),console.log("Full Image URL:","http://localhost:3001".concat(e.profileImage)),console.log("Full Profile Data:",e),l(e)}catch(e){console.error("=== Profile Component Error ==="),console.error("Error loading profile:",e),console.error("Error message:",e.message),console.error("========================"),H.o.error("Failed to load profile",{description:e.message})}finally{i(!1)}},m=async()=>{d(!0);try{H.o.success("Profile edit mode enabled")}catch(e){H.o.error("Failed to edit profile",{description:e.message})}finally{d(!1)}};return o?(0,a.jsx)(q.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(q.Cf,{children:[(0,a.jsx)(q.c7,{children:(0,a.jsx)(q.L3,{children:"Loading Profile"})}),(0,a.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,a.jsx)(Q.A,{className:"h-8 w-8 animate-spin"})})]})}):n?(0,a.jsx)(q.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(q.Cf,{children:[(0,a.jsx)(q.c7,{children:(0,a.jsx)(q.L3,{children:"Profile"})}),(0,a.jsxs)(J.Zp,{children:[(0,a.jsx)(J.aR,{children:(0,a.jsx)(J.ZB,{children:"User Information"})}),(0,a.jsx)(J.Wu,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(L,{className:"h-24 w-24",children:n.profileImage?(0,a.jsx)(E,{src:V(n.profileImage),alt:"".concat(n.name||n.username,"'s avatar"),onError:e=>{console.error("=== Avatar Image Error ==="),console.error("Failed to load image:",V(n.profileImage)),e.target.src="/avatars/01.png"}}):(0,a.jsx)(F,{className:"text-2xl",children:(n.name||n.username).charAt(0).toUpperCase()})}),(0,a.jsx)(f.$,{variant:"outline",size:"icon",className:"absolute bottom-0 right-0 h-8 w-8 rounded-full",onClick:m,disabled:c,children:(0,a.jsx)(Z.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:n.name||n.username}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[(0,a.jsx)(T.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:n.email})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm",children:["@",n.username]})]})]}),(0,a.jsx)(G.w,{}),(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(O.J,{className:"text-muted-foreground",children:"Member since"})]}),(0,a.jsx)("span",{className:"text-muted-foreground",children:new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(O.J,{className:"text-muted-foreground",children:"Last updated"})]}),(0,a.jsx)("span",{className:"text-muted-foreground",children:new Date(n.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 w-full",children:[(0,a.jsx)(f.$,{variant:"outline",className:"flex-1",onClick:m,disabled:c,children:"Edit Profile"}),(0,a.jsx)(f.$,{variant:"outline",className:"flex-1",children:"Settings"})]})]})})]})]})}):(0,a.jsx)(q.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(q.Cf,{children:[(0,a.jsx)(q.c7,{children:(0,a.jsx)(q.L3,{children:"Profile"})}),(0,a.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No profile data available"})})]})})}var Y=s(7725),K=s(2104),ee=s(8485),et=s(7113);function es(){let{setTheme:e}=(0,et.D)();return(0,a.jsxs)(v,{children:[(0,a.jsx)(j,{asChild:!0,children:(0,a.jsxs)(f.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(Y.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(K.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(b,{align:"end",children:[(0,a.jsxs)(N,{onClick:()=>e("light"),children:[(0,a.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)(N,{onClick:()=>e("dark"),children:[(0,a.jsx)(K.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Dark"})]}),(0,a.jsxs)(N,{onClick:()=>e("system"),children:[(0,a.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"System"})]})]})]})}function ea(){let{isAuthenticated:e,setIsAuthenticated:t}=(0,U.A)(),s=(0,n.useRouter)(),[l,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[z,_]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{t(!!R.A.get("access_token")),_(!1)};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[t]),(0,r.useEffect)(()=>{e?q():C(null)},[e]);let q=async()=>{try{let e=await B();C(e)}catch(e){console.error("Failed to load user profile:",e),C(null)}};return z?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex h-24 items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"mr-4 hidden md:flex",children:(0,a.jsxs)(o(),{href:"/",className:"flex items-center space-x-4",children:[(0,a.jsx)(i.A,{className:"h-10 w-10 text-primary"}),(0,a.jsx)("span",{className:"hidden text-2xl font-bold sm:inline-block",children:"Shoppy"})]})})}),(0,a.jsxs)(k,{open:l,onOpenChange:p,children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(f.$,{variant:"ghost",size:"icon",className:"mr-2 px-0 text-base hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:ring-0 focus-visible:ring-offset-0 md:hidden",children:[(0,a.jsx)(c.A,{className:"h-7 w-7"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,a.jsxs)(P,{side:"left",className:"w-[300px]",children:[(0,a.jsx)(S,{children:(0,a.jsxs)(I,{className:"flex items-center space-x-3",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 text-primary"}),(0,a.jsx)("span",{className:"text-xl",children:"Shoppy"})]})}),e?(0,a.jsx)("nav",{className:"flex flex-col space-y-4 mt-8",children:[{title:"Dashboard",path:"/dashboard",icon:(0,a.jsx)(d.A,{className:"mr-2 h-5 w-5"})},{title:"Products",path:"/products",icon:(0,a.jsx)(i.A,{className:"mr-2 h-5 w-5"})},{title:"Create Product",path:"/products/create",icon:(0,a.jsx)(u.A,{className:"mr-2 h-5 w-5"})},{title:"Users",path:"/users",icon:(0,a.jsx)(m.A,{className:"mr-2 h-5 w-5"})}].map(e=>(0,a.jsxs)(f.$,{variant:"ghost",className:"w-full justify-start text-lg",onClick:()=>{p(!1),s.push(e.path)},children:[e.icon,e.title]},e.path))}):(0,a.jsx)("nav",{className:"flex flex-col space-y-4 mt-8",children:D.map(e=>(0,a.jsx)(f.$,{variant:"ghost",className:"w-full justify-start text-lg",onClick:()=>{p(!1),s.push(e.path)},children:e.title},e.title))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)(es,{}),e&&(0,a.jsxs)(v,{children:[(0,a.jsx)(j,{asChild:!0,children:(0,a.jsx)(f.$,{variant:"ghost",size:"icon",className:"relative h-14 w-14 rounded-full hover:bg-accent hover:text-accent-foreground",children:(0,a.jsx)(L,{className:"h-14 w-14",children:(null==w?void 0:w.profileImage)?(0,a.jsx)(E,{src:V(w.profileImage),alt:"".concat(w.name||w.username,"'s avatar"),onError:e=>{e.target.src="/avatars/01.png"}}):(0,a.jsx)(F,{className:"text-xl",children:((null==w?void 0:w.name)||(null==w?void 0:w.username)||"U").charAt(0).toUpperCase()})})})}),(0,a.jsxs)(b,{align:"end",className:"w-56",children:[(0,a.jsxs)(N,{onClick:()=>{console.log("Profile menu item clicked"),y(!0)},className:"cursor-pointer text-base py-2",children:[(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5"}),"Profile"]}),(0,a.jsxs)(N,{onClick:()=>{localStorage.removeItem("access_token"),R.A.remove("access_token"),delete $.A.defaults.headers.common.Authorization,window.location.href="/auth/login",s.push("auth/login")},className:"cursor-pointer text-destructive focus:text-destructive text-base py-2",children:[(0,a.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Logout"]})]})]})]})]})})}),(0,a.jsx)(X,{open:g,onOpenChange:e=>{console.log("Profile dialog state changed:",e),y(e)}})]})}},2336:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(5155);s(2115);var r=s(9602);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},3040:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var a=s(5828);let r=(0,a.createServerReference)("008b0ee705046773f459a88572ff2944041ee4eda2",a.callServer,void 0,a.findSourceMapURL,"getCategories")},4049:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(5155),r=s(8173),n=s.n(r),l=s(7054),o=s(4085),i=s(2233),c=s(6148),d=s(4035);function u(){let{isAuthenticated:e}=(0,l.A)(),t=[{name:"Facebook",icon:(0,a.jsx)(i.A,{className:"h-4 w-4"}),href:"#"},{name:"Twitter",icon:(0,a.jsx)(c.A,{className:"h-4 w-4"}),href:"#"},{name:"Instagram",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),href:"#"}];return(0,a.jsx)("footer",{className:"bg-background border-t",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:[{name:"About",href:"/about"},{name:"Contact",href:"/contact"},{name:"Privacy",href:"/privacy"},{name:"Terms",href:"/terms"}].map(e=>(0,a.jsx)(n(),{href:e.href,className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:e.name},e.name))}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:t.map(e=>(0,a.jsx)(o.$,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full text-muted-foreground hover:text-primary",asChild:!0,children:(0,a.jsxs)(n(),{href:e.href,children:[e.icon,(0,a.jsx)("span",{className:"sr-only",children:e.name})]})},e.name))})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:["\xa9 ",new Date().getFullYear()," Shoppy. All rights reserved."]})]})})}},4085:(e,t,s)=>{"use strict";s.d(t,{$:()=>i});var a=s(5155);s(2115);var r=s(4707),n=s(1027),l=s(9602);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:s,size:n,asChild:i=!1,...c}=e,d=i?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,l.cn)(o({variant:s,size:n,className:t})),...c})}},5007:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>i,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>c});var a=s(5155);s(2115);var r=s(9602);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},5785:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var a=s(5155);s(2115);var r=s(6195),n=s(9602);function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},6171:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>n});var a=s(5155);s(2115);var r=s(7113);function n(e){let{children:t,...s}=e;return(0,a.jsx)(r.N,{...s,children:t})}},7054:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>l});var a=s(5155),r=s(2115);let n=(0,r.createContext)({isAuthenticated:!1,setIsAuthenticated:()=>{}});function l(e){let{children:t}=e,[s,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{l(!!localStorage.getItem("access_token"))},[]),(0,a.jsx)(n.Provider,{value:{isAuthenticated:s,setIsAuthenticated:l},children:t})}function o(){return(0,r.useContext)(n)}},7126:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var a=s(5155),r=s(8173),n=s.n(r),l=s(6046),o=s(7054),i=s(4085),c=s(6507),d=s(4482),u=s(2060),m=s(2823),x=s(8236),h=s(6710),f=s(767),p=s(2115),g=s(9602),v=s(5007),j=s(2336),b=s(5785),N=s(745),y=s(7837),w=s(9606),k=s(5060),A=s(3415),C=s(5828);let z=(0,C.createServerReference)("7f8fe70644aa9bb0033cb4df6dc1b76f73ce616f67",C.callServer,void 0,C.findSourceMapURL,"createProduct");var P=s(3040);let S=A.z.object({name:A.z.string().min(1,"Name is required"),description:A.z.string().min(1,"Description is required"),price:A.z.string().min(1,"Price is required"),categoryId:A.z.string().min(1,"Category is required"),imageFile:A.z.any().optional()});function I(e){let{open:t,handleClose:s,onProductCreated:r}=e,[n,l]=(0,p.useState)([]),[o,c]=(0,p.useState)(!1),[d,u]=(0,p.useState)(null),{register:m,handleSubmit:x,formState:{errors:h},reset:f,setValue:g}=(0,w.mN)({resolver:(0,k.u)(S)});(0,p.useEffect)(()=>{let e=async()=>{try{let e=await (0,P.b)();l(e)}catch(e){console.error("Error fetching categories:",e),u("Failed to load categories")}};t&&e()},[t]);let A=async e=>{try{var t;c(!0),u(null);let a=document.querySelector('input[type="file"]'),n=null==a?void 0:null===(t=a.files)||void 0===t?void 0:t[0];if(!n){u("Please select an image");return}let l=new FileReader;l.onload=async t=>{try{var a;let n=null===(a=t.target)||void 0===a?void 0:a.result;await z({...e,categoryId:parseInt(e.categoryId),price:parseFloat(e.price),imageFile:n}),s(),f(),null==r||r()}catch(e){u("Failed to create product"),console.error("Error creating product:",e)}finally{c(!1)}},l.readAsDataURL(n)}catch(e){u("Failed to create product"),console.error("Error creating product:",e),c(!1)}};return(0,a.jsx)(y.lG,{open:t,onOpenChange:s,children:(0,a.jsx)(y.Cf,{className:"sm:max-w-[425px]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(y.L3,{className:"text-center mb-4",children:"Create New Product"}),(0,a.jsx)(v.Zp,{className:"w-full",children:(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("form",{onSubmit:x(A),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,a.jsx)(b.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(j.p,{id:"name",placeholder:"Product name",...m("name")}),h.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:h.name.message})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,a.jsx)(b.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(j.p,{id:"description",placeholder:"Product description",...m("description")}),h.description&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:h.description.message})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,a.jsx)(b.J,{htmlFor:"price",children:"Price"}),(0,a.jsx)(j.p,{id:"price",type:"number",placeholder:"Product price",...m("price")}),h.price&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:h.price.message})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,a.jsx)(b.J,{htmlFor:"category",children:"Category"}),(0,a.jsxs)(N.l6,{onValueChange:e=>{g("categoryId",e)},children:[(0,a.jsx)(N.bq,{id:"category",children:(0,a.jsx)(N.yv,{placeholder:"Select category"})}),(0,a.jsx)(N.gC,{children:n.map(e=>(0,a.jsx)(N.eb,{value:e.id.toString(),children:e.name},e.id))})]}),h.categoryId&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:h.categoryId.message})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,a.jsx)(b.J,{htmlFor:"image",children:"Image"}),(0,a.jsx)(j.p,{id:"image",type:"file",accept:"image/*",...m("imageFile")})]})]}),d&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:d}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:o,children:o?"Creating...":"Create Product"})]})]})})})]})})})}function _(){let{isAuthenticated:e}=(0,o.A)(),t=(0,l.usePathname)(),[s,r]=(0,p.useState)(!0),[v,j]=(0,p.useState)(!1);if(!e)return null;let b=[{title:"Dashboard",path:"/",icon:(0,a.jsx)(c.A,{className:"h-5 w-5"})},{title:"Products",path:"/products",icon:(0,a.jsx)(d.A,{className:"h-5 w-5"})},{title:"Create Product",path:"#",icon:(0,a.jsx)(u.A,{className:"h-5 w-5"}),onClick:()=>j(!0)},{title:"Users",path:"/users",icon:(0,a.jsx)(m.A,{className:"h-5 w-5"})},{title:"Settings",path:"/settings",icon:(0,a.jsx)(x.A,{className:"h-5 w-5"})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{open:v,handleClose:()=>j(!1)}),(0,a.jsx)("div",{className:(0,g.cn)("hidden border-r bg-background md:block transition-all duration-300 shadow-sm",s?"w-16":"w-64"),children:(0,a.jsxs)("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center justify-between border-b px-4 lg:h-[60px] lg:px-6",children:[!s&&(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2 font-semibold",children:[(0,a.jsx)(d.A,{className:"h-6 w-6 text-primary"}),(0,a.jsx)("span",{className:"text-lg",children:"Shoppy"})]}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"ml-auto hover:bg-muted",onClick:()=>r(!s),children:s?(0,a.jsx)(h.A,{className:"h-5 w-5"}):(0,a.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("nav",{className:"grid items-start px-2 text-sm font-medium lg:px-4",children:b.map(e=>e.onClick?(0,a.jsxs)("button",{onClick:e.onClick,className:(0,g.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 transition-all hover:bg-muted w-full text-left","text-muted-foreground hover:text-foreground",s&&"justify-center"),children:[e.icon,!s&&(0,a.jsx)("span",{children:e.title})]},e.path):(0,a.jsxs)(n(),{href:e.path,className:(0,g.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 transition-all hover:bg-muted",t===e.path?"bg-muted text-primary font-medium":"text-muted-foreground hover:text-foreground",s&&"justify-center"),children:[e.icon,!s&&(0,a.jsx)("span",{children:e.title})]},e.path))})})]})})]})}},7837:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>d,L3:()=>m,c7:()=>u,lG:()=>o});var a=s(5155);s(2115);var r=s(42),n=s(767),l=s(9602);function o(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...t})}function i(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function d(e){let{className:t,children:s,...o}=e;return(0,a.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,a.jsx)(c,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[s,(0,a.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...s})}},9282:(e,t,s)=>{"use strict";s.d(t,{w:()=>l});var a=s(5155);s(2115);var r=s(4147),n=s(9602);function l(e){let{className:t,orientation:s="horizontal",decorative:l=!0,...o}=e;return(0,a.jsx)(r.b,{"data-slot":"separator-root",decorative:l,orientation:s,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...o})}},9324:()=>{},9602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(3463),r=s(9795);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[385,637,398,794,119,51,441,587,358],()=>t(155)),_N_E=e.O()}]);